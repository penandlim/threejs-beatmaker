!function(e){function t(t){for(var o,a,s=t[0],c=t[1],l=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={0:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([36,1]),n()}({36:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(6),i=n(3),a=n(1),s=n(15);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,d,y,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,h(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e={left:t.position.left+this.props.xIndex*t.position.xLeftGap+"%",top:t.position.top+this.props.yIndex*t.position.topGap-this.props.xIndex*t.position.xTopGap+"%"};return a.createElement("div",{className:"note","data-x-index":this.props.xIndex,"data-y-index":this.props.yIndex,style:e},"C#3")}}])&&l(n.prototype,o),r&&l(n,r),t}(a.Component);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}y={left:21,top:86,xLeftGap:4,xTopGap:.63,topGap:-13.05},(d="position")in(p=v)?Object.defineProperty(p,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[d]=y;var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,g(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){for(var e=[],t=0;t<this.props.ySize;t++)for(var n=0;n<this.props.xSize;n++){var o=t*this.props.xSize+n;e.push(a.createElement(v,{key:o,xIndex:n,yIndex:t},"C#3"))}return a.createElement("div",{id:"notes"},e)}}])&&m(n.prototype,o),r&&m(n,r),t}(a.Component);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,T(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return a.createElement("canvas",{id:"threejs"})}}])&&x(n.prototype,o),r&&x(n,r),t}(a.Component),P=n(9),D=n(11);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,z(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=a.createElement(P.a,{icon:D.b,className:"w-5vmin h-5vmin"}).props.icon.icon[4],t=a.createElement(P.a,{icon:D.a,className:"w-5vmin h-5vmin"}).props.icon.icon[4];return a.createElement("div",{className:"play-control"},a.createElement("a",{href:"#",id:"controlButton",className:"control repos-center show-control"},a.createElement("svg",{id:"controlButtonSVG","aria-hidden":"true",focusable:"false","data-prefix":"fas",className:"svg-inline--fa w-5vmin h-5vmin",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},a.createElement("path",{id:"playPath",fill:"currentColor",d:t}),a.createElement("path",{id:"stopPath",fill:"currentColor",d:e}))))}}])&&M(n.prototype,o),r&&M(n,r),t}(a.Component);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function G(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,B(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return a.createElement("div",{id:"react"},a.createElement(C,null),a.createElement("div",{className:"overlay no-click"},a.createElement(j,{xSize:this.props.xSize,ySize:this.props.ySize})),a.createElement("div",{className:"overlay"},a.createElement(N,null)))}}])&&H(n.prototype,o),r&&H(n,r),t}(a.Component);n(28),n(30);function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=r(document.body),q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W(this,"raycaster",void 0),W(this,"hoveredObject",void 0),W(this,"mouseOverArray",void 0),W(this,"canvasEl",void 0),this.raycaster=new o.Raycaster,this.hoveredObject=null,this.mouseOverArray=[],this.canvasEl=r("#threejs")}var t,n,i;return t=e,i=[{key:"mouseIn",value:function(e){null!==e&&e.userData.classObject&&(e.userData.classObject.onHoverStart(),X.addClass("pointer"))}},{key:"mouseOut",value:function(e){null!==e&&e.userData.classObject&&(e.userData.classObject.onHoverEnd(),X.removeClass("pointer"))}}],(n=[{key:"pick",value:function(t,n,o){this.raycaster.setFromCamera(t,o);for(var r=this.raycaster.intersectObjects(n),i=0;i<this.mouseOverArray.length;i++){var a=this.mouseOverArray[i];(r.length&&a!==r[0].object||0===r.length)&&(this.mouseOverArray.splice(i,1),i--,e.mouseOut(a))}return r.length?(this.hoveredObject=r[0].object,this.mouseOverArray.includes(this.hoveredObject)||(this.mouseOverArray.push(this.hoveredObject),e.mouseIn(this.hoveredObject))):this.hoveredObject=null,this.hoveredObject}},{key:"execute",value:function(){return!(null===this.hoveredObject||!this.hoveredObject.userData.classObject||(this.hoveredObject.userData.classObject.onClick(),0))}},{key:"scroll",value:function(e){return!(null===this.hoveredObject||!this.hoveredObject.userData.classObject||(this.hoveredObject.userData.classObject.onScroll(e),0))}}])&&F(t.prototype,n),i&&F(t,i),e}(),U=n(4),Y=n(5),J=n(17);function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(){function e(t,n,r,i,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,"object3d",void 0),K(this,"originalPos",void 0),K(this,"material",void 0),K(this,"isClicked",void 0),K(this,"color",void 0),K(this,"instrument",void 0),K(this,"enabled",void 0),K(this,"eventID",void 0),K(this,"timeIndex",void 0),K(this,"noteValueDOM",void 0),K(this,"playTween",void 0),K(this,"note",void 0),K(this,"humanModel",void 0);var c=new o.BoxGeometry(3,.7,2);c.translate(0,-.35,0);var l=new o.MeshPhongMaterial({color:16777215});this.object3d=new o.Mesh(c,l),this.object3d.position.x=i,this.originalPos={x:i,y:a},this.object3d.position.y=a,this.object3d.receiveShadow=!0,this.object3d.userData.classObject=this,this.material=l,this.isClicked=!1,this.color=t,this.object3d.userData.hoverColor=t,this.instrument=n,this.enabled=!1,this.eventID=null,this.timeIndex=r,this.noteValueDOM=s,this.playTween=new U.Tween(this.object3d.position).to({y:this.originalPos.y-1},150).easing(U.Easing.Exponential.Out).chain(new U.Tween(this.object3d.position).to({y:this.originalPos.y},150).easing(U.Easing.Sinusoidal.Out)),this.note=e.DEFAULT_NOTE,this.noteValueDOM.text(e.DEFAULT_NOTE)}var t,n,r;return t=e,(n=[{key:"updateNote",value:function(e,t){var n=e>0?"-2m":"2m";n=Object(J.a)(Object(Y.c)(this.note,n)),this.note=n,this.noteValueDOM.text(n),t&&this.oneshot(n)}},{key:"clearHoverTween",value:function(){this.object3d.userData.hoverTween&&U.remove(this.object3d.userData.hoverTween)}},{key:"assignHumanModel",value:function(e){this.humanModel=e,e.setColorTween(this.color)}},{key:"getHumanModel",value:function(){return this.humanModel}},{key:"showNoteValue",value:function(){this.noteValueDOM.addClass("show-note")}},{key:"hideNoteValue",value:function(){this.noteValueDOM.removeClass("show-note")}},{key:"onHoverStart",value:function(){if(!this.isClicked){if(this.clearHoverTween(),this.object3d.userData.hoverColor){var e=(o=.2,r=this.object3d.userData.hoverColor,i=Math.round,a=255*r.r,s=255*r.g,c=255*r.b,l=r.a?r.a:null,{r:i(a*(f=(u=o<0)?1+o:1-o)+(h=u?0:255*o))/255,g:i(s*f+h)/255,b:i(c*f+h)/255,a:l}),t=this.object3d,n=t.material;t.userData.hoverTween=new U.Tween(n.color).to({r:e.r,g:e.g,b:e.b},300).easing(U.Easing.Cubic.Out).start()}this.showNoteValue()}var o,r,i,a,s,c,l,u,h,f}},{key:"onHoverEnd",value:function(){if(!this.isClicked){this.clearHoverTween();var e=this.object3d.material;this.object3d.userData.hoverTween=new U.Tween(e.color).to({r:1,g:1,b:1},300).easing(U.Easing.Cubic.Out).start(),this.hideNoteValue()}}},{key:"onClick",value:function(){this.clearHoverTween(),this.isClicked?this.toggleOff():this.toggleOn()}},{key:"onScroll",value:function(e){this.updateNote(e,"started"!==i.Transport.state)}},{key:"toggleOn",value:function(){this.object3d.material.color.copy(this.object3d.userData.hoverColor),this.object3d.userData.tween=new U.Tween(this.object3d.scale).to({y:[.5,1.5]},300).easing(U.Easing.Back.Out).start(),this.isClicked=!0,this.enabled=!0,this.schedule(),this.oneshot(this.note),this.showNoteValue()}},{key:"toggleOff",value:function(){this.object3d.userData.hoverTween=new U.Tween(this.object3d.material.color).to({r:1,g:1,b:1},300).easing(U.Easing.Cubic.Out).start(),this.object3d.userData.tween=new U.Tween(this.object3d.scale).to({y:1},300).easing(U.Easing.Back.Out).start(),this.isClicked=!1,this.enabled=!1,this.clear(),this.hideNoteValue()}},{key:"oneshot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"32n";this.instrument.triggerAttackRelease(e,t),this.playTween.stop(),this.playTween.start()}},{key:"scheduleCallback",value:function(e){this.instrument.triggerAttackRelease(this.note,"32n",e),this.playTween.stop(),this.playTween.start(),this.humanModel.flashColor()}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&(this.note=e),this.clear();var t=this;this.eventID=i.Transport.schedule((function(e){t.scheduleCallback(e)}),"0:0:"+this.timeIndex)}},{key:"reschedule",value:function(){null!==this.eventID&&(this.clear(),this.schedule())}},{key:"clear",value:function(){null!==this.eventID&&(i.Transport.clear(this.eventID),this.eventID=null)}},{key:"getObject3D",value:function(){return this.object3d}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K(Q,"DEFAULT_NOTE","C3");var te=function(){function e(t,n,a,s,c,l,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ee(this,"instrumentArray",void 0),ee(this,"xSize",void 0),ee(this,"ySize",void 0),ee(this,"xGap",void 0),ee(this,"yGap",void 0),ee(this,"beatsPerMeasure",void 0),ee(this,"length",void 0),ee(this,"noteColorArray",void 0),ee(this,"innerArray",void 0),this.xSize=t,this.ySize=n,this.xGap=c,this.yGap=l,this.beatsPerMeasure=u,this.length=t*n,this.innerArray=new Array(this.length),this.noteColorArray=[new o.Color(13200437),new o.Color(15314983),new o.Color(15546405),new o.Color(2912371),new o.Color(8763285),new o.Color(14406265)],this.instrumentArray=[new i.PolySynth({volume:-6}).toDestination(),new i.MembraneSynth({volume:-6}).toDestination(),new i.MembraneSynth({volume:-6}).toDestination(),new i.MembraneSynth({volume:-6}).toDestination(),new i.MembraneSynth({volume:-6}).toDestination(),new i.MembraneSynth({volume:-6}).toDestination()];for(var h=r(".note"),f=0;f<this.ySize;f++)for(var p=0;p<this.xSize;p++){var d=f*this.xSize+p;this.innerArray[d]=new Q(this.noteColorArray[f],this.instrumentArray[f],p,a+c*p,s+l*f,h.eq(d))}i.Transport.loopEnd="1m",i.Transport.loop=!0}var t,n,a;return t=e,(n=[{key:"get",value:function(e){return this.innerArray[e]}},{key:"get2d",value:function(e,t){return this.innerArray[t*this.xSize+e]}},{key:"addToScene",value:function(e,t){var n=new o.BoxGeometry(.5,1,2);n.translate(0,-.25,0);for(var r=new o.MeshPhongMaterial({color:3355443}),i=0;i<this.ySize;i++)for(var a=0;a<this.xSize;a++){var s=this.innerArray[i*this.xSize+a].getObject3D();if(t.push(s),e.add(s),(a+1)%this.beatsPerMeasure==0){var c=new o.Mesh(n,r);c.receiveShadow=!0,c.position.x=s.position.x+this.xGap/2,c.position.y=s.position.y,c.position.z=s.position.z,e.add(c)}else if(0===a){var l=new o.Mesh(n,r);l.receiveShadow=!0,l.position.x=s.position.x-this.xGap/2,l.position.y=s.position.y,l.position.z=s.position.z,e.add(l)}}}},{key:"play",value:function(){i.Transport.start()}},{key:"pause",value:function(){i.Transport.pause()}},{key:"stop",value:function(){i.Transport.stop()}}])&&$(t.prototype,n),a&&$(t,a),e}(),ne=function(e){var t={animations:e.animations,scene:e.scene.clone(!0)},n={};e.scene.traverse((function(e){e instanceof o.SkinnedMesh&&(n[e.name]=e)}));var r={},i={};for(var a in t.scene.traverse((function(e){e instanceof o.Bone&&(r[e.name]=e),e instanceof o.SkinnedMesh&&(i[e.name]=e)})),n){for(var s=n[a].skeleton,c=i[a],l=[],u=0;u<s.bones.length;++u){var h=r[s.bones[u].name];l.push(h)}c.bind(new o.Skeleton(l,s.boneInverses),c.matrixWorld)}return t};function oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re(this,"mixer",void 0),re(this,"animations",void 0),re(this,"object3d",void 0),re(this,"material",void 0),re(this,"defaultColor",void 0),re(this,"actions",void 0),re(this,"head",void 0),re(this,"currentActionIndex",void 0),re(this,"shouldPlay",void 0),re(this,"colorTween",void 0),this.animations=n,this.object3d=t,this.object3d.children[1].castShadow=!0,this.object3d.children[1].material=new o.MeshPhongMaterial({skinning:!0,flatShading:!0}),this.material=this.object3d.children[1].material,this.defaultColor=this.material.color,this.mixer=new o.AnimationMixer(t),this.actions=[],this.head=this.object3d.getObjectByName("mixamorigHead");for(var r=0;r<n.length;r++)this.actions.push(this.mixer.clipAction(n[r]));this.actions[1].play(),this.currentActionIndex=0,this.shouldPlay=!1}var t,n,r;return t=e,(n=[{key:"setColorTween",value:function(e){this.colorTween=new U.Tween(this.material.color).to({r:e.r,g:e.g,b:e.b},100).easing(U.Easing.Cubic.Out).chain(new U.Tween(this.material.color).to({r:this.defaultColor.r,g:this.defaultColor.g,b:this.defaultColor.b},200))}},{key:"updateMixer",value:function(e){this.mixer.update(e)}},{key:"transitionAnimTo",value:function(e){this.actions[e].enabled=!0,this.actions[e].time=0,this.actions[e].setEffectiveTimeScale(1),this.actions[e].setEffectiveWeight(1),this.actions[e].play(),this.actions[this.currentActionIndex].crossFadeTo(this.actions[e],1,!0),this.currentActionIndex=e}},{key:"updateXPos",value:function(e,t,n,o){this.object3d.position.x=e+(t-e)*n}},{key:"flashColor",value:function(){null!==this.colorTween&&(this.colorTween.stop(),this.colorTween.start())}},{key:"getObject3D",value:function(){return this.object3d}}])&&oe(t.prototype,n),r&&oe(t,r),e}(),ae=n(16),se=r(window);function ce(){var e=document.querySelector("#threejs"),t=new o.WebGLRenderer({canvas:e,antialias:!0});t.setPixelRatio(window.devicePixelRatio),t.shadowMap.enabled=!0,t.shadowMap.type=o.PCFSoftShadowMap;var n=new o.OrthographicCamera(-40,40,22.5,-22.5,1,1e3);n.position.set(-20,25,45),n.lookAt(new o.Vector3(0,15,0));new o.Vector3(0,0,0),new o.Vector3(0,0,0);var r=new o.Scene;r.add(n),window.scene=r,r.background=new o.Color("gray");var a=new o.Clock,s=[],c=[];window.humanModels=s;var l=new q,u={x:0,y:0},h=new te(16,6,-25,-.25,3.5,6,4);window.noteBlockArray=h;var f=new o.HemisphereLight(11657727,12155424,.5);f.name="HemisphereLight",r.add(f);var p=new o.DirectionalLight(16777215,1);p.shadow.mapSize.width=512,p.shadow.mapSize.height=512,p.position.set(25,50,10),p.castShadow=!0,p.name="DirectionalLight",r.add(p),r.add(p.target),p.shadow.camera.left=-15,p.shadow.camera.right=15,p.shadow.camera.top=50,p.shadow.camera.bottom=-50;var d=new o.AmbientLight(16777215,.1);d.position.set(5,10,2),d.name="AmbientLight",r.add(d);(new ae.a).load("models/everything-trimmed.glb",(function(e){for(var t=0;t<6;t++){0!==t&&(e=ne(e));var n=new ie(e.scene.children[0],e.animations);n.getObject3D().name="Character "+t,s.push(n),c.push(n.getObject3D().children[1]);for(var i=0;i<h.xSize;i++)h.get2d(i,t).assignHumanModel(n)}for(var a=0;a<s.length;a++){var l=s[a];l.transitionAnimTo(a+5);var u=l.getObject3D();u.position.x=-30,u.position.y=6*a-.2,u.rotateZ(-1.5708),r.add(u)}var f=(new o.Box3).setFromObject(s[0].getObject3D());f.getSize(new o.Vector3).length(),f.getCenter(new o.Vector3)})),h.addToScene(r,c);var y=function(t){var n=function(t){var n,o,r=e.getBoundingClientRect();return"clientX"in t.originalEvent?(n=t.originalEvent.clientX,o=t.originalEvent.clientY):"touches"in t.originalEvent&&(n=t.originalEvent.touches[0].pageX,o=t.originalEvent.touches[0].pageY),{x:n-r.left,y:o-r.top}}(t);u.x=n.x/e.clientWidth*2-1,u.y=n.y/e.clientHeight*-2+1},v=function(){u.x=-1e5,u.y=-1e5};se.on("mousemove",y),se.on("mouseout",v),se.on("mouseleave",v),se.on("click",(function(e){y(e),l.pick(u,c,n),l.execute()})),se.on("wheel",(function(e){y(e),l.pick(u,c,n),l.scroll(e.originalEvent.deltaY)})),requestAnimationFrame((function e(h){h*=.001;h;var f=a.getDelta();if(function(e){var t=e.domElement,n=t.clientWidth,o=t.clientHeight,r=t.width!==n||t.height!==o;return r&&e.setSize(n,o,!1),r}(t)){var p=t.domElement;n instanceof o.PerspectiveCamera&&(n.aspect=p.clientWidth/p.clientHeight),n.updateProjectionMatrix()}for(var d=i.Transport.progress,y=0;y<s.length;y++)s[y].updateMixer(f),s[y].updateXPos(-30,28,d,f);l.pick(u,c,n),t.render(r,n),requestAnimationFrame(e),U.update()}))}window.THREE=o,window.Tone=i,s.render(a.createElement(L,{xSize:16,ySize:6}),document.getElementById("container"),(function(){ce();var e=r("#controlButton"),t=document.getElementById("controlButtonSVG"),n=(Snap(t),Snap.select("#playPath")),o=Snap.select("#stopPath"),a=n.node.getAttribute("d"),s=o.node.getAttribute("d");e.on("click",(function(){"started"===i.Transport.state?(n.animate({d:a},300,mina.easeinout),i.Transport.stop()):(n.animate({d:s},300,mina.backout),i.Transport.start())}))}))}});